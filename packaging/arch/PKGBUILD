# Maintainer: Sergi Perich <info@soploslinux.com>
pkgname=kernel-installer
pkgver=1.0.0
pkgrel=1
pkgdesc="Graphical interface for downloading, compiling and installing Linux kernels"
arch=('any')
url="https://github.com/SoplosLinux/kernell-installer"
license=('GPL3')
depends=('python-gobject' 'gtk3' 'wget' 'binutils' 'flex' 'bison' 'make' 'gcc' 'bc')
source=("$pkgname-$pkgver.tar.gz::https://github.com/SoplosLinux/kernell-installer/archive/refs/tags/v$pkgver.tar.gz")
sha256sums=('SKIP')

package() {
  mkdir -p "$pkgdir/usr/bin"
  mkdir -p "$pkgdir/usr/share/kernel-installer"
  mkdir -p "$pkgdir/usr/share/applications"
  mkdir -p "$pkgdir/usr/share/metainfo"
  mkdir -p "$pkgdir/usr/share/icons/hicolor/48x48/apps"
  mkdir -p "$pkgdir/usr/share/icons/hicolor/128x128/apps"
  mkdir -p "$pkgdir/usr/share/icons/hicolor/256x256/apps"

  cp "$srcdir/bin/kernel-installer" "$pkgdir/usr/bin/kernel-installer"
  chmod +x "$pkgdir/usr/bin/kernel-installer"
  cp -r "$srcdir/kernel_installer_gui" "$pkgdir/usr/share/kernel-installer/"
  cp "$srcdir/kernel_installer_gui/data/kernel-installer.desktop" "$pkgdir/usr/share/applications/"
  cp "$srcdir/kernel_installer_gui/data/io.github.alexiarstein.kernelinstall.metainfo.xml" "$pkgdir/usr/share/metainfo/"
  cp "$srcdir/kernel_installer_gui/assets/icons/kernel-installer-48.png" "$pkgdir/usr/share/icons/hicolor/48x48/apps/kernel-installer.png"
  cp "$srcdir/kernel_installer_gui/assets/icons/kernel-installer-128.png" "$pkgdir/usr/share/icons/hicolor/128x128/apps/kernel-installer.png"
  cp "$srcdir/kernel_installer_gui/assets/icons/kernel-installer-256.png" "$pkgdir/usr/share/icons/hicolor/256x256/apps/kernel-installer.png"
}
